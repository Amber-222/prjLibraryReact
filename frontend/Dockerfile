# Pull down the base image (so the actual linux/windows image our app will run on)
FROM node:22-alpine

# Then set where the files will live in the Docker Container
WORKDIR /usr/src/app

# Then copy package.json (file generated by node when project created bcuz it contaoins all packages needed for project to work)
COPY package*.json ./

# Install packages for api to work in the container
RUN npm i 

# After all packages installed, copy across the actual api code
COPY . .

# Allow app to talk to outside world (default for vite is 5173)
EXPOSE 5173

# Run the frontend - tell vite to allow connections from places other than localhost
CMD ["npm", "run", "dev", "--host", "0.0.0.0"]